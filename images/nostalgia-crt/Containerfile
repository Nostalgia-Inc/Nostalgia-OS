ARG BASE_IMAGE
FROM ghcr.io/ublue-os/bazzite:latest

LABEL org.opencontainers.image.title="Nostalgia CRT"
LABEL org.opencontainers.image.description="KDE-based CRT image with Arduino IDE and EmuDeck setup"
LABEL org.opencontainers.image.authors="Nostalgia INC."

# Arduino and EmuDeck pre-installed via rpm-ostree
RUN rpm-ostree install arduino steam-devices

# Copy shared branding, scripts (optional, if needed)
COPY /common /usr/share/nostalgia

# First boot setup
COPY firstboot/10-nostalgia-setup.sh /etc/firstboot.d/10-nostalgia-setup.sh
COPY firstboot/nostalgia.service /etc/systemd/system/nostalgia.service

RUN chmod +x /etc/firstboot.d/10-nostalgia-setup.sh && \
    systemctl enable nostalgia.service
