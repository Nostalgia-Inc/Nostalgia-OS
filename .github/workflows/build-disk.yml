      - name: List builder outputs
        if: always()
        shell: bash
        run: |
          set -euo pipefail
          echo "Output dir: ${{ steps.build.outputs.output-directory }}"
          # Show up to 3 levels to catch bootiso/install.iso
          find "${{ steps.build.outputs.output-directory }}" -maxdepth 3 -type f -print || true

      - name: Move & rename ISO to nostalgia-*
        shell: bash
        run: |
          set -euo pipefail
          OUT="${{ steps.build.outputs.output-directory }}"
          echo "OUT=${OUT}"

          # Find the first ISO anywhere under OUT (depth â‰¤ 3)
          SRC="$(find "${OUT}" -maxdepth 3 -type f -name '*.iso' | head -n1 || true)"
          if [[ -z "${SRC}" ]]; then
            echo "No ISO found under ${OUT}"
            echo "Contents:"
            find "${OUT}" -maxdepth 3 -type f -print || true
            exit 1
          fi

          DEST="${OUT}/${{ steps.names.outputs.base }}.iso"
          echo "Renaming:"
          echo "  ${SRC}"
          echo "   -> ${DEST}"
          mv -v "${SRC}" "${DEST}"

          # Optionally move/rename a checksum file if present (sha256 or sha256sum)
          CHK="$(find "${OUT}" -maxdepth 3 -type f \( -name '*.sha256sum' -o -name '*.sha256' \) | head -n1 || true)"
          if [[ -n "${CHK}" ]]; then
            NEWCHK="${DEST%.*}.sha256sum"
            echo "Renaming checksum:"
            echo "  ${CHK}"
            echo "   -> ${NEWCHK}"
            mv -v "${CHK}" "${NEWCHK}"
          fi

          echo "Final contents of ${OUT}:"
          find "${OUT}" -maxdepth 2 -type f -print
